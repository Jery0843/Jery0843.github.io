---
title: "DarkZero"
date: 2026-02-10T17:00:01Z
categories: [HackTheBox, Writeup]
tags: [htb, hackthebox, writeup, pentest, darkzero]
description: "HackTheBox DarkZero machine writeup ‚Äî reconnaissance and enumeration walkthrough."
toc: true
comments: true
---

---

üéØ **Overview**  
DarkZero presents a sophisticated Active Directory environment with two separate domains connected via trust relationships. The attack chain involves exploiting MSSQL linked server misconfigurations, pivoting into an internal network using Ligolo-ng, escalating privileges through a kernel exploit, and finally capturing Kerberos tickets to compromise the domain controller.

**What makes this machine unique?**

- Multihomed architecture with split-horizon DNS  
- Cross-domain trust exploitation  
- Modern pivoting techniques with Ligolo-ng  
- Real-world Kerberos ticket theft scenario

---

## üì° Phase 1: Reconnaissance - Mapping the Attack Surface

### Initial Port Scan  
Let's start by discovering what services are running:

```bash
nmap -p 1-65535 -T4 -A -v 10.10.11.89
```

üîç **What are we looking for?**

- Active Directory services (LDAP, Kerberos, DNS)  
- Database services (potential entry points)  
- Remote access services (WinRM, RDP)

**Key Discoveries:**

| Port  | Service     | Why It Matters                                  |
|-------|-------------|--------------------------------------------------|
| 1433  | MS-SQL Server | Entry point for command execution               |
| 88    | Kerberos    | Domain authentication - ticket capture opportunity |
| 389/636 | LDAP/LDAPS | Active Directory queries                         |
| 5985  | WinRM       | Remote shell access (if we get creds)            |
| 445   | SMB         | File sharing, potential relay attacks            |

üí° **Learning Moment:** Notice port 1433 (MSSQL)? This is often overlooked but can be a goldmine. SQL servers frequently have elevated privileges and interesting configurations like linked servers.

---

### DNS Reconnaissance - Discovering the Hidden Network

```bash
dig @10.10.11.89 ANY darkzero.htb
```

üéì **What just happened?**

The DNS query reveals something fascinating:

- `10.10.11.89` - External interface (what we can reach)  
- `172.16.20.1` - Internal interface (hidden network)

This is called a **multihomed host** ‚Äî a server with network cards in multiple networks. Think of it like a door between two rooms. We're in the front room, but there's a whole other room behind it!

---

### Preparing the Environment

Add the target to your hosts file for easier access:

```bash
echo "10.10.11.89 DC01.darkzero.htb darkzero.htb" | sudo tee -a /etc/hosts
```

üîë **Credentials Provided:** `john.w:RFulUtONCOL!`

Let's verify these work:

```bash
crackmapexec smb 10.10.11.89 -u 'john.w' -p 'RFulUtONCOL!' -d darkzero.htb
```

‚úÖ Authentication successful! But only default shares are accessible. We need to dig deeper.

---

---

<div class="paywall-section">
  <div class="paywall-fade"></div>
  <div class="paywall-cta">
    <div class="paywall-icon">üîí</div>
    <h3>Premium Content</h3>
    <p>The full exploitation walkthrough, privilege escalation, and flags are available exclusively for members.</p>
    <a href="https://whop.com/andres-411f/" target="_blank" rel="noopener" class="paywall-btn">
      Unlock Full Writeup ‚Üí
    </a>
  </div>
</div>
